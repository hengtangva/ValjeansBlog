# defer 和 ascyc 区别    

首先，我们知道的是，在浏览器解析 html 的时候，碰到 script 标签就会停下解析，去执行 js 脚本。    

所以，为了不妨碍页面的快速展示，我们通常会把 js 脚本放到 body 的后面。     

然而，这还是带来了一个问题，如果 html 文件很长呢？，那么你要等好久才能执行 js 文件    

其实 碰到 script 标签，并不是直接执行的，你还要请求 js 的资源，请求到了才能执行。    

所以，这个请求时间我们是可以利用的。    

这里，我们的 defer 就出场了。    

---
## defer

script 脚本加上一个 defer 表示后，就是告诉浏览器，你先用 web api 去请求 该js 资源吧，我这里还是解析我的 html。    

待 html 解析完成后，js 资源一般也请求到了，这时候就可以执行脚本，从而提升性能。    

## async

script 加上 async 标签后，同样的，主线程继续执行解析工作，web api 去请求资源。    

但是不同的是，它请求到了 js 资源就得立即执行，还是会阻塞 解析(如果在解析完之前请求到了资源)。    


## 区别

区别我们可以用一张图来解释。    

![](./assets/defer.jpg)    

蓝色代表请求资源     

红色代表执行脚本    

绿色代表解析文档     

所以，个人感觉 用 defer 是比较好的。    

最后附一张图，加深理解。   

![](./assets/defer.png)