# 清除浮动

## 前言

之前写了清除浮动的各种方式，但是好像文件弄丢了，这次重新总结一下吧。       

## 为什么要清除浮动

首先，浮动在某种程度上来说是脱离文档流的，假设父元素就只有一个子元素，这个子元素还开启了浮动。      

那么，这个父元素的高度就会塌陷，因为子元素已经脱离文档流了，父元素里面是没东西的。        

如果还有其他子元素的话，父元素撑开的高度也和这个浮动元素无关了。        


其次，浮动是水平方向上的，它会继续影响和它同一水平的兄弟元素。       

若其兄弟元素是块级元素的话，由于脱离文档流，浮动如果是left，那么其可能会覆盖其兄弟元素       

但是如果其兄弟元素是行内元素或者行内块级元素的话，浮动会导致这些元素环绕着浮动元素。       

基于以上两点，我们有时候需要清除浮动。       


## 清除浮动

清除浮动得用到一个属性 clear        

这个属性声明了该元素是否想要与浮动元素相连         

比如： clear：left; 表示，其左边不会出现浮动元素，如果左边有的话，它会自动移到浮动元素下方。避免与浮动元素为邻      

这样，就可以使自己的位置避免浮动元素影响了。       

这里还是深挖一下 clear 的实现原理。     

之前的 clear 所做的工作其实很简单，想把元素移动到浮动元素下方？，给个 margin-top 即可，值为浮动元素高度。         

不过，后来 css 引入了一个 clearence 的概念，也就是说，它会在浮动元素下方创建以小块空白区域(clearance).      

浮动元素在其上方，清除浮动的元素在其下方。      

### 清除浮动方法一  - 在其兄弟元素上添加 claer 属性

代码如下：     

```html
<style>
.parent {
        width: 300px;
        height: 300px;
    }
.blue {
    background: blue;
    float:left;
    width: 50px;
    height: 50px;
}
.red {
    background: red;
    float: right;
    width: 50px;
    height: 50px;
}
.green {
    background: green;
    width: 50px;
    height: 50px;
    /* 这里是清楚其左右的浮动 */
    clear: left;
}
</style>
<body>
    <div class="parent">
        <div class='blue'>123</div>
        <div class='red'>123</div>
        <div class='green'>123</div>
    </div>
</body>
```       

在 green 上面定义了 clear:both 属性后, 由于其左右都有浮动元素，就会移动到它们下面。       

然后还有一点是，clear 对于内联元素似乎没什么效果，可能因为浮动就是为了形成内联元素的环绕效果。        


### ::after 伪元素清除浮动

这种方法称为 clearfix 方法,具体原理是这样的.       

当容器只有浮动元素时,会导致盒子塌陷.       

因此,可以在利用父元素上的 ::after 元素，由于该元素紧跟着该元素，因此可以看做起最后一个子元素。        

我们只需要在该元素上清除浮动，即可撑开父元素。       

如下：      

```css
.clear::after {
    content: '';
    width: 0;
    height: 0;
    clear: both;
    display:block;
}
```       

### 创建新的 BFC 清除浮动

详见 BFC 那一章

