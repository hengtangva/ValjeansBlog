# 数学问题

## 位运算相关

### 剑指offer 11 二进制中 1 的个数

输入一个整数，输出该数32位二进制表示中1的个数。其中负数用补码表示      

**思路**     

刚碰到题目，我的第一个想法是模二取余，感觉很简单，没次模二如果有余数，肯定就是有一个 1        

代码如下：     

```js
function NumberOf1(n)
{
    let count = 0
    while(n>=1) {
        if(n == 1) {
            count++;
            break;
        }
        if(1== n%2) {
            count++
        }
        n = parseInt(n/2);
    }
    return count;
}
```      

很遗憾的是，当输入 -2147483648 的时候，过不了，这才想起来还有负数要考虑。       

模二取余的方法肯定是不行了，想到的只有位运算了，但奈何自己位运算不太熟悉。        

于是，看了别人的解，自己在来总结一下。     

--- 

有这样一个规律，一个数 n 和 n-1 做与运算，会消去最右边的 1        

于是，我们就可以这样不断做与运算，直到 n 没有 1 了，即 n == 0      

这时候，我们每消除一个 1 就计数一下，最后，把计数返回就可以了。     

```js
function NumberOf1(n)
{
    let count = 0
    while(n!=0) {
        count++;
        n = n&(n-1);
    }
    return count;
}
```      

---      

不过这个结论时比较难想的，如果能记得当然好。        
其实，还有一种比较通用的解法，就是移位。     

我们可以让 n 的每一位都与 1 进行与操作，如果与的结果是 1 ，就说明该位有 1 ，计数就可以了。     

````js
function NumberOf1(n)
{
    // write code here
    let count = 0
    let x = 1;
    while(x!=0) {
      if(x&n) {
          count++;
      }
      x = x<<1; // x 移位一下，取和其他位与
    }
    return count;
}
```

