# 位运算-异或

最近的 leetcode 全是异或解码的题目。这里借此复习一下异或操作。        

## 基本原理

异或运算方法其实很简单，这里随便提一下。     

1. 0^1 = 1^0 = 1        

2. 1^1 = 0^0 = 0      

3. a^b = b^a   (交换)        

4. 若 a^b = c, 那么， a^c = b, 且 b^c = a         

5. x^x = 0, x^0 = x

## 应用

### 加密

根据第四条的性质         

让 a 为明文，b 为秘钥。那么异或运算得到的密文就是 c          

解密的话，只需拿到密文 c 和秘钥 b 异或就能重新得到明文。         

这是一个对称加密。       

最近的 leetcode 题目基本都是解码异或加密的数组，得到原数组的。       


### 数据备份

对于两个文件 x 和 y           

可以让它们异或 得到备份文件 z            

只要不是 x 和 y 都损坏了，就可以通过异或 z 恢复损坏的额文件。         

### 交换值

感觉这是最好玩的应用了，采用异或可以不声明一个新的变量而做到交换两个值。         

空间复杂度是  O(0)         

```js
let a = 1, b = 2;
a = a ^ b;
b = a ^ b;
a = a ^ b;
consolr.log(a); // 2
console.log(b); // 1
```        

来稍微推一下。       

1. a = a ^ b        

2. b = a ^ b = a ^ b ^ b = a        

3. a = a ^ b = a ^ a ^ b = b         

## 例子 

### 例一

一个数组有 n-1 个数，是 1-n 的整数，且数字没有重复，请找出缺少的那个数       

---      

- 思路     

乍一看，想到的就是排序，遍历，找后一个数见前一个数不为 1 的那个数，即能找到缺少的那个数。        

不过，用异或也有其解法。       

```js
let arr = [1,2,3,4,6,7];
function solution(arr, n) {
    // 先求出前 n 个数异或
    let a1 = 0
    for(let i = 1; i <n; i++) {
        a1 = a1^i;
    }
    let a2 = 0;
    for(let i = 0; i < arr.length; i++) {
        a2 = a2^arr[i];
    }
    // 因为相同元素异或结果是 0 ，因此除了缺失的那个数，其余元素都抵消掉了。
    res = a1^a2
}
```    

再留一题做思考吧。       

一个数组包含 n+1 个成员，这些成员是 1 到 n 之间的整数。只有一个成员出现了两次，其他成员都只出现一次，请找出重复出现的那个数字。          







